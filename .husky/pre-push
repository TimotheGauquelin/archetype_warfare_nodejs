#!/bin/sh
if [ -t 1 ]; then
  exec < /dev/tty
fi

. "$(dirname "$0")/_/husky.sh"

echo "ðŸ” VÃ©rification avant push..."

# ExÃ©cuter les tests avec couverture
echo "ðŸ§ª ExÃ©cution des tests avec vÃ©rification de la couverture..."
npm run test:coverage

# Si les tests ou la couverture Ã©chouent, empÃªcher le push
if [ $? -ne 0 ]; then
  echo "âŒ Les tests ont Ã©chouÃ© ou la couverture est insuffisante (minimum 80% requis). Push annulÃ©."
  exit 1
fi

echo "âœ… Toutes les vÃ©rifications ont rÃ©ussi !" 